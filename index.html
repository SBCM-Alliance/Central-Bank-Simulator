<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­å¤®éŠ€è¡Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ - Central Bank Simulator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --primary: #1a237e; --accent: #ffd600; --bg: #f5f7f9; --dark: #263238; --error: #d32f2f; --success: #2e7d32; --market: #0288d1; --real: #f4511e; }
        body { font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif; background-color: var(--bg); color: #333; margin: 0; padding: 15px; line-height: 1.5; }
        
        .container { max-width: 1250px; margin: 0 auto; display: flex; flex-direction: column; gap: 15px; }
        @media (min-width: 992px) { .container { display: grid; grid-template-columns: 420px 1fr; gap: 25px; } }

        .card { background: #fff; padding: 20px; border-radius: 14px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 10px; position: relative; }
        h1 { color: var(--primary); font-size: 1.1rem; margin: 0 0 15px 0; border-left: 5px solid var(--primary); padding-left: 12px; font-weight: bold; }

        /* åŒæœŸãƒ»ãƒ‹ãƒ¥ãƒ¼ã‚¹ */
        .sync-banner { background: var(--dark); color: #fff; padding: 22px; border-radius: 14px; }
        .sync-banner h1 { color: #fff; border-left-color: var(--accent); }
        .btn-sync { background: var(--accent); color: #000; border: none; font-weight: bold; width: 100%; padding: 14px; border-radius: 8px; cursor: pointer; margin-bottom: 15px; font-size: 1rem; transition: 0.2s; }
        .news-terminal { background: #000; color: #00e676; padding: 12px; border-radius: 8px; font-family: monospace; height: 140px; overflow-y: auto; font-size: 0.85rem; border: 1px solid #444; }
        
        /* æ“ä½œç³» */
        .rate-display { font-size: 3.2rem; font-weight: bold; color: var(--primary); text-align: center; display: block; margin: 10px 0; }
        input[type="range"] { width: 100%; margin: 15px 0; height: 10px; cursor: pointer; }
        
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .btn-voice { padding: 10px; border: 2px solid #ddd; background: #fafafa; color: #555; font-size: 0.8rem; border-radius: 8px; cursor: pointer; font-weight: bold; text-align: left; }
        .btn-voice:hover { border-color: var(--primary); background: #f0f0ff; }
        .btn-voice span { display: block; font-size: 0.65rem; color: #999; }

        /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º */
        .briefing { font-size: 0.9rem; line-height: 1.6; color: #444; background: #fffde7; padding: 15px; border-radius: 8px; border: 1px solid #ffe082; }
        .fragment-log { background: #fdecea; border-radius: 8px; padding: 12px; font-size: 0.8rem; border-left: 5px solid var(--error); margin-top: 15px; }

        .metric-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 15px; }
        .metric-card { background: #fff; border: 1px solid #ddd; padding: 15px; border-radius: 12px; text-align: center; }
        .val { font-size: 1.1rem; font-weight: bold; display: block; margin-top: 5px; }

        /* ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ */
        .reaction-item { padding: 12px; border-radius: 8px; font-size: 0.85rem; border: 1px solid #eee; margin-top: 8px; }
        .bg-gov { background: #f1f8e9; border-left: 5px solid #689f38; }
        .bg-biz { background: #e3f2fd; border-left: 5px solid #1976d2; }
        .bg-home { background: #fff3e0; border-left: 5px solid #f57c00; }

        .footer-note { text-align: center; font-size: 0.75rem; color: #78909c; padding: 30px; }
    </style>
</head>
<body>

    <header style="text-align:center; padding: 15px 0 20px 0;">
        <h2 style="font-size:1.8rem; color:var(--primary); margin:0; font-weight: 900;">ğŸ¦ ä¸­å¤®éŠ€è¡Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h2>
        <div style="font-size:0.85rem; opacity:0.7; font-family: monospace;">Central Bank Governance OS v1.0 | <span id="clock">--:--:--</span></div>
    </header>

    <div class="container">
        <!-- å·¦ï¼šã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« -->
        <div class="left">
            <div class="card sync-banner">
                <h1>ğŸ“¡ ä¸–ç•Œã®çµŒæ¸ˆæ³¢å½¢ã‚’åŒæœŸ</h1>
                <button class="btn-sync" onclick="syncWorld()">æœ€æ–°ã®å¸‚å ´çŠ¶æ³ã«åŒæœŸã™ã‚‹ ğŸ”„</button>
                <div class="news-terminal" id="news-feed">> å¤–éƒ¨ã‚µãƒ¼ãƒãƒ¼æ¥ç¶šå¾…æ©Ÿä¸­...</div>
            </div>

            <div class="card">
                <h1>ğŸ›ï¸ æ”¿ç­–é‡‘åˆ©ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼</h1>
                <span class="rate-display" id="rate-display">0.75%</span>
                <input type="range" id="rate-slider" min="-0.1" max="5.0" step="0.05" value="0.25">
                
                <h1 style="font-size: 0.9rem; border:none; padding:0; color:#666;">ğŸ’¬ æœ‰æ¨©è€…ã®çš†æ§˜ã‹ã‚‰ã®å£°</h1>
                <div class="btn-group">
                    <button class="btn-voice" onclick="applyPolicy('stop_inf')">ã€Œç‰©ä¾¡ã‚’ä¸‹ã’ã¦ï¼ã€<span>è¼¸å…¥ã‚³ã‚¹ãƒˆå¢—ã¸ã®æ‚²é³´</span></button>
                    <button class="btn-voice" onclick="applyPolicy('save_mort')">ã€Œãƒ­ãƒ¼ãƒ³ã‚’ä¸‹ã’ã¦ï¼ã€<span>åˆ©ä¸Šã’ã«ã‚ˆã‚‹ç ´ç¶»ã®ææ€–</span></button>
                    <button class="btn-voice" onclick="applyPolicy('need_int')">ã€Œè²¯é‡‘ã«åˆ©æ¯ã‚’ï¼ã€<span>é‡‘åˆ©ã®ã‚ã‚‹ä¸–ç•Œã¸ã®æ¸‡æœ›</span></button>
                    <button class="btn-voice" onclick="applyPolicy('fix_recess')">ã€Œä¸æ™¯æ°—ã‚’ç›´ã—ã¦ï¼ã€<span>ä¼æ¥­ã®æŠ•è³‡æ„æ¬²æ¸›é€€</span></button>
                </div>
            </div>

            <div class="card">
                <h1>ğŸ“‹ æ—¥éŠ€ãƒ–ãƒªãƒ¼ãƒ•ã‚£ãƒ³ã‚°</h1>
                <div id="boj-briefing" class="briefing">
                    ä¸–ç•Œæƒ…å‹¢ã‚’åŒæœŸã—ã€æ—¥æœ¬çµŒæ¸ˆã®èˆµã‚’æ¡ã£ã¦ãã ã•ã„ã€‚
                </div>
            </div>
        </div>

        <!-- å³ï¼šãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚ºãƒ‘ãƒãƒ« -->
        <div class="right">
            <div class="card">
                <h1>ğŸ“ˆ å¸‚å ´æœŸå¾…å€¤ vs çµŒæ¸ˆå®Ÿä½“ (åŸºæº–100)</h1>
                <div style="height: 340px; position: relative;">
                    <canvas id="mainChart"></canvas>
                </div>
                <div style="display: flex; justify-content: center; gap: 20px; font-size: 0.8rem; margin-top: 10px;">
                    <span><span style="color:var(--market)">â– </span> å¸‚å ´ (æ•°å­—ãƒ»ç¬æ™‚)</span>
                    <span><span style="color:var(--real)">â– </span> å®Ÿä½“ (ç”Ÿæ´»ãƒ»é…å»¶)</span>
                </div>
            </div>

            <div class="metric-grid">
                <div class="metric-card">
                    <small>æƒ³å®šãƒ»ãƒ‰ãƒ«å††ç›¸å ´</small>
                    <span class="val" id="yen-val">--å††</span>
                </div>
                <div class="metric-card">
                    <small>æ—¥ç±³é‡‘åˆ©å·®</small>
                    <span class="val" id="gap-val">--%</span>
                </div>
                <div class="metric-card">
                    <small>å®Ÿè³ªè³ƒé‡‘åœ§è¿«</small>
                    <span class="val" id="wage-val">--</span>
                </div>
            </div>

            <div class="card" style="margin-top:20px; border-top: 6px solid var(--error);">
                <h1>âš–ï¸ æ±ºå®šæ¨©ã®åˆ†æ•£ï¼ˆè‡ªåˆ†ä»¥å¤–ã®å‹•ãï¼‰</h1>
                <div id="fragment-log" class="fragment-log">
                    ã‚ãªãŸã®æ“ä½œã‚’ç‹‚ã‚ã›ã‚‹ã€Œå¤–éƒ¨è¦å› ã€ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
                </div>

                <h1 style="border-left-color: #555; margin-top: 20px;">ğŸ‘¥ åˆ©å®³é–¢ä¿‚è€…ã®åå¿œ</h1>
                <div class="reaction-container">
                    <div class="reaction-item bg-gov" id="react-gov">ğŸ›ï¸ æ”¿åºœ</div>
                    <div class="reaction-item bg-biz" id="react-biz">ğŸ­ çµŒæ¸ˆç•Œ</div>
                    <div class="reaction-item bg-home" id="react-home">ğŸ  ä¸€èˆ¬å®¶è¨ˆ</div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-note">
        â€» å®Ÿéš›ã®çµŒæ¸ˆè²¬ä»»ã¯åˆ†æ•£ã—ã¦ãŠã‚Šã€å˜ç‹¬ã§ã®åˆ¶å¾¡ã¯ä¸å¯èƒ½ã§ã™ã€‚ãƒã‚¤ãƒŠã‚¹ã®æ‰‹å–ã‚Šã¯ã€Œå®¶è¨ˆã®èµ¤å­—ã€ã‚’æ„å‘³ã—ã¾ã™ã€‚<br>
        Â© 2026 SBCM Alliance
    </div>

    <script>
        let currentRate = 0.25;
        let usaRate = 4.75;
        let govSpend = 50; 
        let speculation = 50;

        const ctx = document.getElementById('mainChart').getContext('2d');
        const mainChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['æ ªä¾¡(å¸‚å ´)', 'å††ä¾¡å€¤(å¸‚å ´)', 'ç‰©ä¾¡(å®Ÿä½“)', 'ãƒ­ãƒ¼ãƒ³(å®Ÿä½“)', 'æ‰‹å–ã‚Š(å®Ÿä½“)'],
                datasets: [{
                    data: [100, 100, 100, 100, 100],
                    backgroundColor: [
                        '#0288d1', '#03a9f4', 
                        '#f4511e', '#ff7043', '#fb8c00' 
                    ],
                    borderRadius: 6
                }]
            },
            options: { 
                responsive: true, maintainAspectRatio: false, 
                scales: { 
                    y: { 
                        min: -100, // ãƒã‚¤ãƒŠã‚¹ã¾ã§è¡¨ç¤º
                        max: 180, 
                        grid: { color: '#eee' },
                        ticks: {
                            callback: function(value) { return value === 100 ? "åŸºæº–(100)" : value; }
                        }
                    } 
                },
                plugins: { legend: { display: false } }
            }
        });

        function updateSimulation() {
            document.getElementById('rate-display').innerText = currentRate.toFixed(2) + "%";
            const gap = usaRate - currentRate;
            document.getElementById('gap-val').innerText = gap.toFixed(2) + "%";

            // å¸‚å ´æŒ‡æ¨™
            const stock = 100 - (currentRate * 12) + (usaRate * 5) + (speculation * 0.2);
            const yenValue = 100 - (gap * 8); 

            // å®Ÿä½“çµŒæ¸ˆæŒ‡æ¨™
            const inflation = 100 + (gap * 10) - (currentRate * 6) + (govSpend * 0.1);
            const mortgage = 100 + (currentRate * 50); // ãƒ­ãƒ¼ãƒ³ã®é‡ã¿ã‚’ã•ã‚‰ã«å¢—åŠ 
            
            // æ‰‹å–ã‚Šè¨ˆç®—ï¼šç‰©ä¾¡ã¨ãƒ­ãƒ¼ãƒ³ãŒã€Œ100ã€ã‚’è¶…ãˆãŸåˆ†ã ã‘æ¸›ç®—
            let realIncome = 100 - ((inflation - 100) * 1.5) - ((mortgage - 100) * 0.8) + (currentRate * 3);

            mainChart.data.datasets[0].data = [stock, yenValue, inflation, mortgage, realIncome];
            
            // æ‰‹å–ã‚ŠãŒãƒã‚¤ãƒŠã‚¹ã®å ´åˆã®è‰²å¤‰ãˆ
            mainChart.data.datasets[0].backgroundColor[4] = realIncome < 0 ? '#b71c1c' : '#fb8c00';
            
            mainChart.update();

            document.getElementById('yen-val').innerText = (142 + (gap * 4.2)).toFixed(1) + "å††";
            document.getElementById('wage-val').innerText = (realIncome < 0 ? "ğŸš¨ ç ´ç¶»" : realIncome < 80 ? "âš ï¸ æ·±åˆ»" : realIncome < 95 ? "ä½ä¸‹" : "ç¶­æŒ");

            // åˆ†æ•£ãƒ­ã‚°
            let alog = "";
            if (govSpend > 70) alog += "ã€æ”¿åºœã€‘é¸æŒ™ã‚’æ„è­˜ã—ãŸãƒãƒ©ãƒã‚­äºˆç®—ã‚’å¼·è¡Œã€‚ã‚¤ãƒ³ãƒ•ãƒ¬åœ§åŠ›ã‚’é«˜ã‚ã¦ã„ã¾ã™ã€‚<br>";
            if (speculation > 70) alog += "ã€æŠ•æ©Ÿã€‘å††å£²ã‚Šãƒã‚¸ã‚·ãƒ§ãƒ³ãŒç©ã¿ä¸ŠãŒã‚Šã€ã‚ãªãŸã®æ“ä½œãŒåŠ¹ãã«ãããªã£ã¦ã„ã¾ã™ã€‚<br>";
            if (usaRate > 5.0) alog += "ã€ç±³FRBã€‘é«˜é‡‘åˆ©ç¶­æŒã‚’å®£è¨€ã€‚æ—¥æœ¬ã®åˆ©ä¸Šã’åŠ¹æœãŒå¸åã•ã‚Œã¦ã„ã¾ã™ã€‚<br>";
            document.getElementById('fragment-log').innerHTML = alog || "å„ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒç‰½åˆ¶ã—åˆã£ã¦ãŠã‚Šã€åŠ‡çš„ãªæ”¹å–„ã¯è¦‹è¾¼ã‚ã¾ã›ã‚“ã€‚";

            // å„ç•Œã®åå¿œ
            let govMsg = "ğŸ›ï¸ <b>æ”¿åºœ:</b> åˆ©æ‰•ã„è²»ã®å¢—å¤§ã‚’æ¥µåº¦ã«è­¦æˆ’ã€‚";
            let bizMsg = "ğŸ­ <b>çµŒæ¸ˆç•Œ:</b> å††å®‰ã§è¼¸å‡ºå¥½èª¿ã ãŒã€åŸææ–™é«˜ãŒä¸­å°ã‚’ç›´æ’ƒã€‚";
            let homeMsg = "ğŸ  <b>å®¶è¨ˆ:</b> ç‰©ä¾¡ã¯é«˜ã„ã—ã€é‡‘åˆ©ã‚’ä¸Šã’ã‚Œã°ãƒ­ãƒ¼ãƒ³ã§æ­»ã¬ã€‚";
            
            if(realIncome < 0) homeMsg = "<span style='color:var(--error)'>ğŸ  <b>å®¶è¨ˆ:</b> å®Ÿè³ªæ‰‹å–ã‚ŠãŒãƒã‚¤ãƒŠã‚¹ã€‚è²¯é‡‘ã‚’åˆ‡ã‚Šå´©ã™ç”Ÿæ´»ã€‚</span>";
            else if(gap > 4.2) homeMsg = "<span style='color:var(--error)'>ğŸ  <b>å®¶è¨ˆ:</b> ã‚¤ãƒ³ãƒ•ãƒ¬ã§ç”Ÿæ´»æ°´æº–ãŒæ•°åå¹´å‰ã«é€†æˆ»ã‚Šã€‚</span>";
            
            if(currentRate > 2.5) bizMsg = "<span style='color:var(--error)'>ğŸ­ <b>çµŒæ¸ˆç•Œ:</b> è³‡é‡‘ç¹°ã‚Šæ‚ªåŒ–ã€‚è¨­å‚™æŠ•è³‡ãŒå®Œå…¨ã«æ­»ã«ã¾ã—ãŸã€‚</span>";
            if(currentRate > 2.0) govMsg = "<span style='color:var(--error)'>ğŸ›ï¸ <b>æ”¿åºœ:</b> åˆ©æ‰•ã„è²»ãŒé˜²è¡›è²»ã‚’çªç ´ã€‚å›½å®¶è²¡æ”¿ã®ç ´ç¶»ã‚’æ‡¸å¿µã€‚</span>";

            document.getElementById('react-gov').innerHTML = govMsg;
            document.getElementById('react-biz').innerHTML = bizMsg;
            document.getElementById('react-home').innerHTML = homeMsg;
        }

        async function syncWorld() {
            const feed = document.getElementById('news-feed');
            const briefing = document.getElementById('boj-briefing');
            feed.innerHTML = "> çµŒæ¸ˆæŒ‡æ¨™ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸä¸­...";
            try {
                const rssUrl = encodeURIComponent('https://news.google.com/rss/search?q=æ—¥éŠ€+é‡‘åˆ©+FRB+ç‚ºæ›¿+çµŒæ¸ˆ&hl=ja&gl=JP&ceid=JP:ja');
                const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${rssUrl}`);
                const data = await response.json();
                if (data.status === 'ok') {
                    feed.innerHTML = "";
                    data.items.slice(0, 6).forEach(item => {
                        feed.innerHTML += `<div class="news-item">> ${item.title}</div>`;
                    });
                    usaRate = 5.25; 
                    govSpend = 85; 
                    speculation = 95; 
                    briefing.innerHTML = "<b>ã€åŒæœŸå®Œäº†ã€‘</b> ä¸–ç•Œã¯é«˜é‡‘åˆ©ã€æ—¥æœ¬æ”¿åºœã¯ãƒãƒ©ãƒã‚­ç¶™ç¶šã€‚å††å®‰åœ§åŠ›ã¯æœ€å¤§ã§ã™ã€‚";
                    updateSimulation();
                }
            } catch (e) { feed.innerHTML = "> åŒæœŸå¤±æ•—ã€‚"; }
        }

        function applyPolicy(type) {
            const briefing = document.getElementById('boj-briefing');
            switch(type) {
                case 'stop_inf':
                    currentRate = 3.5;
                    briefing.innerHTML = "<b>ã€ç‰©ä¾¡å„ªå…ˆã€‘</b> é‡‘åˆ©ã‚’å¤§å¹…ã«å¼•ãä¸Šã’ã€‚ã‚¤ãƒ³ãƒ•ãƒ¬ã¯æ­¢ã¾ã‚Šã¾ã™ãŒã€å®¶è¨ˆã¯ãƒ­ãƒ¼ãƒ³ã§æ­»ã«ã¾ã™ã€‚";
                    break;
                case 'save_mort':
                    currentRate = 0.1;
                    briefing.innerHTML = "<b>ã€ãƒ­ãƒ¼ãƒ³æ•‘æ¸ˆã€‘</b> ä½é‡‘åˆ©ã‚’ç¶­æŒã€‚ç”Ÿæ´»ã¯å††å®‰ã‚¤ãƒ³ãƒ•ãƒ¬ã«ç„¼ãå°½ãã•ã‚Œã¾ã™ã€‚";
                    break;
                case 'need_int':
                    currentRate = 1.0;
                    briefing.innerHTML = "<b>ã€é é‡‘è€…é‡è¦–ã€‘</b> ã€Œé‡‘åˆ©ã®ã‚ã‚‹ä¸–ç•Œã€ã¸ã€‚éŠ€è¡Œã¯æ½¤ã„ã¾ã™ãŒã€ä¼æ¥­ã®æ´»åŠ›ã¯å‰ŠãŒã‚Œã¾ã™ã€‚";
                    break;
                case 'fix_recess':
                    currentRate = -0.1;
                    briefing.innerHTML = "<b>ã€æ™¯æ°—åˆºæ¿€ã€‘</b> ãƒã‚¤ãƒŠã‚¹é‡‘åˆ©ã€‚ä¼æ¥­ã®å»¶å‘½ã«ã¯ãªã‚Šã¾ã™ãŒã€å††ã®ä¿¡èªã¯æ¶ˆæ»…ã—ã¾ã™ã€‚";
                    break;
            }
            document.getElementById('rate-slider').value = currentRate;
            updateSimulation();
        }

        function quickSet(val) {
            currentRate = Math.max(-0.1, Math.min(5.0, val));
            document.getElementById('rate-slider').value = currentRate;
            updateSimulation();
        }

        document.getElementById('rate-slider').addEventListener('input', (e) => {
            currentRate = parseFloat(e.target.value);
            updateSimulation();
        });

        setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);
        updateSimulation();
    </script>
</body>
</html>
